<div align="center">

<svg width="120" height="120" viewBox="0 0 120 120" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path d="M60 10L105 35V85L60 110L15 85V35L60 10Z" fill="url(#paint0_linear)" stroke="#2D6CDF" stroke-width="2"/>
  <path d="M60 30L80 40V75L60 85L40 75V40L60 30Z" fill="white" stroke="#2D6CDF" stroke-width="2"/>
  <circle cx="60" cy="57" r="10" fill="#2D6CDF"/>
  <path d="M60 43V57L68 65" stroke="white" stroke-width="3" stroke-linecap="round"/>
  <defs>
    <linearGradient id="paint0_linear" x1="15" y1="60" x2="105" y2="60" gradientUnits="userSpaceOnUse">
      <stop stop-color="#61DAFB"/>
      <stop offset="1" stop-color="#2D6CDF"/>
    </linearGradient>
  </defs>
</svg>

# NaviHive - ç°ä»£åŒ–ä¸ªäººå¯¼èˆªç«™

![NaviHive å¯¼èˆªç«™](https://img.shields.io/badge/NaviHive-å¯¼èˆªç«™-blue)
![React](https://img.shields.io/badge/React-19.0.0-61dafb)
![TypeScript](https://img.shields.io/badge/TypeScript-5.7-3178c6)
![Material UI](https://img.shields.io/badge/Material_UI-7.0-0081cb)
![Cloudflare](https://img.shields.io/badge/Cloudflare-Workers-f38020)
![License](https://img.shields.io/badge/License-MIT-green)

[![Deploy to Cloudflare Workers](https://deploy.workers.cloudflare.com/button)](https://deploy.workers.cloudflare.com/?url=https://github.com/ziyuandaili/Cloudflare-Navihive)

</div>

> ğŸš€ ä¸€ä¸ªä¼˜é›…ã€ç°ä»£åŒ–çš„ç½‘ç«™å¯¼èˆªç®¡ç†ç³»ç»Ÿï¼Œè®©ä½ çš„ä¹¦ç­¾æ”¶è—äº•ç„¶æœ‰åº

## ğŸ¯ åŠŸèƒ½æ¸…å•

### æ ¸å¿ƒåŠŸèƒ½
| åŠŸèƒ½ | ç‰ˆæœ¬ | æè¿° |
|------|------|------|
| ğŸ“š **æ™ºèƒ½åˆ†ç»„ç®¡ç†** | `v1.0.0` | æŒ‰ç±»åˆ«ç»„ç»‡ç½‘ç«™ï¼Œæ”¯æŒæ— é™åˆ†ç»„å’ŒåµŒå¥—ç®¡ç† |
| ğŸ”„ **æ‹–æ‹½æ’åº** | `v1.0.0` | å¯è§†åŒ–è°ƒæ•´åˆ†ç»„å’Œç½‘ç«™é¡ºåºï¼Œæ‰€è§å³æ‰€å¾— |
| ğŸŒ“ **æš—è‰²æ¨¡å¼** | `v1.0.0` | æ·±è‰²/æµ…è‰²ä¸»é¢˜è‡ªç”±åˆ‡æ¢ï¼Œå‘µæŠ¤åŒçœ¼ |
| ğŸ“¤ **æ•°æ®å¯¼å…¥å¯¼å‡º** | `v1.0.0` | JSON æ ¼å¼æ•°æ®å¤‡ä»½ä¸è¿ç§» |
| ğŸ¨ **è‡ªå®šä¹‰æ ·å¼** | `v1.0.0` | è‡ªå®šä¹‰ CSSã€æ ‡é¢˜ã€Logoï¼Œæ‰“é€ ä¸“å±å¯¼èˆª |
| ğŸ–¼ï¸ **èƒŒæ™¯å›¾ç‰‡è®¾ç½®** | `v1.0.3` | æ”¯æŒèƒŒæ™¯å›¾ç‰‡å’Œè’™ç‰ˆé€æ˜åº¦è°ƒèŠ‚ |
| ğŸ“ **åˆ†ç»„æŠ˜å ** | `v1.0.2` | æ”¯æŒå±•å¼€/æ”¶èµ·åˆ†ç»„å†…å®¹ |
| ğŸ”€ **æ™ºèƒ½æ•°æ®åˆå¹¶** | `v1.0.2` | å¯¼å…¥æ—¶è‡ªåŠ¨å»é‡ï¼ŒæŒ‰ URL æ™ºèƒ½åŒ¹é… |
| ğŸ’¾ **è®°ä½æˆ‘ç™»å½•** | `v1.0.4` | å¯é€‰ 30 å¤©é•¿æ•ˆ Tokenï¼Œå…é¢‘ç¹ç™»å½• |
| ğŸŒ **è®¿å®¢æ¨¡å¼** | `v1.1.0` | å…ç™»é™†æµè§ˆå…¬å¼€å†…å®¹ï¼Œç§å¯†å†…å®¹ä¿æŠ¤ |
| ğŸ“± **å®Œç¾å“åº”å¼** | `v1.0.0` | æ¡Œé¢ã€å¹³æ¿ã€ç§»åŠ¨ç«¯å®Œç¾é€‚é… |

### å®‰å…¨åŠŸèƒ½
| åŠŸèƒ½ | ç‰ˆæœ¬ | æè¿° |
|------|------|------|
| ğŸ” **JWT è®¤è¯** | `v1.0.0` | Web Crypto API + HMAC-SHA256 ç­¾å |
| ğŸ”’ **bcrypt åŠ å¯†** | `å®‰å…¨æ›´æ–°` | 10 è½®ç›å€¼å¯†ç å“ˆå¸Œï¼Œé˜²æš´åŠ›ç ´è§£ |
| ğŸª **HttpOnly Cookie** | `å®‰å…¨æ›´æ–°` | é˜² XSS Token çªƒå– |
| ğŸ›¡ï¸ **XSS é˜²æŠ¤** | `å®‰å…¨æ›´æ–°` | CSS ä»£ç æ²™ç®±åŒ–ï¼Œç§»é™¤å±é™©æ¨¡å¼ |
| ğŸš« **SSRF é˜²æŠ¤** | `å®‰å…¨æ›´æ–°` | ç§æœ‰ IP åœ°å€è¿‡æ»¤ |
| ğŸ’‰ **SQL æ³¨å…¥é˜²æŠ¤** | `å®‰å…¨æ›´æ–°` | å…¨å‚æ•°åŒ–æŸ¥è¯¢ |
| ğŸ§± **ç™»å½•é€Ÿç‡é™åˆ¶** | `v1.1.0` | 5 æ¬¡/15 åˆ†é’Ÿï¼Œé˜²æš´åŠ›ç ´è§£å¹¶è®°å½• IP |
| ğŸ“¦ **è¯·æ±‚ä½“é™åˆ¶** | `å®‰å…¨æ›´æ–°` | æœ€å¤§ 1MBï¼Œé˜²å†…å­˜æº¢å‡º |
| ğŸŒ **CORS ç™½åå•** | `å®‰å…¨æ›´æ–°` | ç²¾ç¡®è®¿é—®æ§åˆ¶ |
| âœ… **TypeScript ä¸¥æ ¼æ¨¡å¼** | `å®‰å…¨æ›´æ–°` | å…¨æ ˆç±»å‹å®‰å…¨ï¼Œ65+ ç±»å‹é”™è¯¯ä¿®å¤ |
| ğŸ§ª **æ·±åº¦æ•°æ®éªŒè¯** | `å®‰å…¨æ›´æ–°` | å¯¼å…¥æ“ä½œå…¨é¢éªŒè¯ |

### éƒ¨ç½²ä¸æ€§èƒ½
| ç‰¹æ€§ | ç‰ˆæœ¬ | æè¿° |
|------|------|------|
| â˜ï¸ **Cloudflare Workers** | `v1.0.0` | å…¨çƒè¾¹ç¼˜è®¡ç®—ï¼Œæ¯«ç§’çº§å“åº” |
| ğŸ—„ï¸ **D1 æ•°æ®åº“** | `v1.0.0` | åˆ†å¸ƒå¼ SQLiteï¼Œå…è´¹ 500MB |
| ğŸ’° **é›¶æˆæœ¬éƒ¨ç½²** | `v1.0.0` | å…è´¹å¥—é¤è¶³å¤Ÿä¸ªäººä½¿ç”¨ |
| âš¡ **æè‡´æ€§èƒ½** | `v1.0.0` | å…¨çƒ CDN åŠ é€Ÿ |
| ğŸ”§ **è‡ªå®šä¹‰åŸŸå** | `v1.0.0` | æ”¯æŒç»‘å®šä¸ªäººåŸŸå |

> ğŸ’¡ **å½“å‰ç‰ˆæœ¬**ï¼šv1.1.0 | å®Œæ•´æ›´æ–°æ—¥å¿—è¯¦è§ [æ›´æ–°æ—¥å¿—](#-æ›´æ–°æ—¥å¿—)

---

## ğŸ¯ å¿«é€Ÿå¼€å§‹

**ä¸‰æ­¥éƒ¨ç½²ï¼Œç«‹å³ä½¿ç”¨ï¼š**

1. **Fork é¡¹ç›®** â†’ ç‚¹å‡»å³ä¸Šè§’ Fork æŒ‰é’®
2. **ä¸€é”®éƒ¨ç½²** â†’ [![Deploy to Cloudflare Workers](https://deploy.workers.cloudflare.com/button)](https://deploy.workers.cloudflare.com/?url=https://github.com/ä½ çš„ç”¨æˆ·å/Cloudflare-Navihive)
3. **é…ç½®æ•°æ®åº“** â†’ åœ¨ Cloudflare æ§åˆ¶å°åˆ›å»º D1 æ•°æ®åº“å¹¶åˆå§‹åŒ–

> è¯¦ç»†æ­¥éª¤è§ä¸‹æ–¹[éƒ¨ç½²æŒ‡å—](#-éƒ¨ç½²æŒ‡å—)

---

NaviHive æ˜¯åŸºäº Cloudflare Workers æ„å»ºçš„è½»é‡çº§å¯¼èˆªç«™ç‚¹ï¼Œå®Œç¾æ›¿ä»£æµè§ˆå™¨ä¹¦ç­¾æ ã€‚å®ƒæä¾›ç›´è§‚çš„å¯è§†åŒ–ç®¡ç†ç•Œé¢ï¼Œæ”¯æŒåˆ†ç»„åˆ†ç±»ã€æ‹–æ‹½æ’åºã€æš—è‰²æ¨¡å¼ç­‰å®ç”¨åŠŸèƒ½ï¼Œè®©ä½ çš„å¸¸ç”¨ç½‘ç«™è§¦æ‰‹å¯åŠã€‚é›¶æˆæœ¬éƒ¨ç½²ï¼Œç§’çº§è®¿é—®ï¼Œéšæ—¶éšåœ°ç®¡ç†ä½ çš„ç½‘ç»œä¸–ç•Œå…¥å£ã€‚

## ğŸ“‘ ç›®å½•

- [åŠŸèƒ½æ¸…å•](#-åŠŸèƒ½æ¸…å•)
- [åœ¨çº¿æ¼”ç¤º](#-åœ¨çº¿æ¼”ç¤º)
- [ç‰¹æ€§](#-ç‰¹æ€§)
- [æ¼”ç¤ºæˆªå›¾](#-æ¼”ç¤ºæˆªå›¾)
- [æŠ€æœ¯æ ˆ](#ï¸-æŠ€æœ¯æ ˆ)
- [éƒ¨ç½²æŒ‡å—](#-éƒ¨ç½²æŒ‡å—)
  - [å‡†å¤‡å·¥ä½œ](#ä¸€å‡†å¤‡å·¥ä½œ)
  - [ä¸€é”®éƒ¨ç½²æ–¹æ³•](#äºŒä¸€é”®éƒ¨ç½²æ–¹æ³•æ¨èå°ç™½ç”¨æˆ·)
  - [æ‰‹åŠ¨éƒ¨ç½²æ–¹æ³•](#ä¸‰æ‰‹åŠ¨éƒ¨ç½²æ–¹æ³•é€‚åˆå¼€å‘è€…)
  - [åˆå§‹åŒ–ä¸æ•°æ®åº“è®¾ç½®](#å››åˆå§‹åŒ–ä¸æ•°æ®åº“è®¾ç½®)
- [å…ç™»é™†è®¿é—®éƒ¨ç½²ä¸æ—§é¡¹ç›®è¿ç§»](#-å…ç™»é™†è®¿é—®éƒ¨ç½²ä¸æ—§é¡¹ç›®è¿ç§»)
- [ä½¿ç”¨æŒ‡å—](#-ä½¿ç”¨æŒ‡å—)
  - [ç™»å½•ç³»ç»Ÿ](#ç™»å½•ç³»ç»Ÿ)
  - [è®¿å®¢æ¨¡å¼ä¸ç¼–è¾‘æ¨¡å¼](#-è®¿å®¢æ¨¡å¼ä¸ç¼–è¾‘æ¨¡å¼)
  - [é…ç½®æ‚¨çš„å¯¼èˆªç«™](#é…ç½®æ‚¨çš„å¯¼èˆªç«™)
  - [ä½¿ç”¨è‡ªå®šä¹‰åŸŸå](#ä½¿ç”¨è‡ªå®šä¹‰åŸŸåå¯é€‰)
- [å¸¸è§é—®é¢˜è§£ç­”](#-å¸¸è§é—®é¢˜è§£ç­”)
- [é¡¹ç›®ç»“æ„](#ï¸-é¡¹ç›®ç»“æ„)
- [è´¡çŒ®](#-è´¡çŒ®)
- [è®¸å¯è¯](#-è®¸å¯è¯)
- [é¸£è°¢](#-é¸£è°¢)
- [æ›´æ–°æ—¥å¿—](#-æ›´æ–°æ—¥å¿—)
- [æ”¯æŒä¸€ä¸‹ä½œè€…](#-æ”¯æŒä¸€ä¸‹ä½œè€…)
- [Star History](#star-history)

## ğŸŒ åœ¨çº¿æ¼”ç¤º

ç«‹å³ä½“éªŒ NaviHive çš„æ‰€æœ‰åŠŸèƒ½ï¼š**[åœ¨çº¿æ¼”ç¤ºç«™ç‚¹](https://navihive.chatbot.cab/)**

```
ğŸ‘¤ æ¼”ç¤ºè´¦å·ï¼šadmin
ğŸ”‘ æ¼”ç¤ºå¯†ç ï¼šNaviHive2025!
```

> ğŸ’¡ æç¤ºï¼šæ¼”ç¤ºç«™æ•°æ®ä¼šå®šæœŸé‡ç½®ï¼Œè¯·å‹¿ä¿å­˜é‡è¦ä¿¡æ¯

## âœ¨ æ ¸å¿ƒç‰¹æ€§

### ğŸ¯ ç®¡ç†åŠŸèƒ½
-   ğŸ“š **æ™ºèƒ½åˆ†ç»„** - æŒ‰ç±»åˆ«ç»„ç»‡ç½‘ç«™ï¼Œæ”¯æŒæ— é™åˆ†ç»„å’ŒåµŒå¥—ç®¡ç†
-   ğŸ”„ **æ‹–æ‹½æ’åº** - å¯è§†åŒ–è°ƒæ•´åˆ†ç»„å’Œç½‘ç«™é¡ºåºï¼Œæ‰€è§å³æ‰€å¾—
-   ğŸ¨ **é«˜åº¦è‡ªå®šä¹‰** - è‡ªå®šä¹‰æ ‡é¢˜ã€Logoã€èƒŒæ™¯å›¾ã€CSS æ ·å¼ï¼Œæ‰“é€ ä¸“å±å¯¼èˆªç«™
-   ğŸ“¤ **æ•°æ®å¯¼å…¥å¯¼å‡º** - ä¸€é”®å¤‡ä»½æ¢å¤ï¼Œæ”¯æŒ JSON æ ¼å¼æ•°æ®è¿ç§»

### ğŸ” å®‰å…¨ä¿éšœ
-   ğŸ”’ **ä¼ä¸šçº§è®¤è¯** - JWT + bcrypt åŠ å¯†ï¼ŒHttpOnly Cookie é˜² XSS
-   ğŸ‘¤ **è®¿é—®æ§åˆ¶** - å†…ç½®ç”¨æˆ·è®¤è¯ç³»ç»Ÿï¼Œä¿æŠ¤ä½ çš„ç§å¯†æ•°æ®
-   ğŸ§± **ç™»å½•é€Ÿç‡é™åˆ¶** - `/api/login` é»˜è®¤é™ 5 æ¬¡/15 åˆ†é’Ÿï¼Œè¶…é™è¿”å› 429 å¹¶è®°å½• IP
-   ğŸªª **å…ç™»é™†è®¿å®¢æ¨¡å¼** - å¯é€šè¿‡ `AUTH_REQUIRED_FOR_READ` å¼€å…³å…è®¸è®¿å®¢åªè¯»è®¿é—®å…¬å¼€åˆ†ç»„ä¸ç«™ç‚¹
-   ğŸ›¡ï¸ **å®‰å…¨é˜²æŠ¤** - SQL æ³¨å…¥é˜²æŠ¤ã€SSRF é˜²æŠ¤ã€è¯·æ±‚ä½“å¤§å°é™åˆ¶

### ğŸ¨ ç”¨æˆ·ä½“éªŒ
-   ğŸŒ“ **ä¸»é¢˜åˆ‡æ¢** - æ·±è‰²/æµ…è‰²æ¨¡å¼è‡ªç”±åˆ‡æ¢ï¼Œå‘µæŠ¤åŒçœ¼
-   ğŸ“± **å®Œç¾å“åº”å¼** - ä»æ¡Œé¢åˆ°ç§»åŠ¨ç«¯ï¼Œå„ç§å±å¹•å®Œç¾é€‚é…
-   âš¡ **æè‡´æ€§èƒ½** - Cloudflare å…¨çƒ CDN åŠ é€Ÿï¼Œæ¯«ç§’çº§å“åº”
-   ğŸ¯ **é›¶æˆæœ¬éƒ¨ç½²** - åŸºäº Cloudflare Workers å…è´¹å¥—é¤ï¼Œæ°¸ä¹…å…è´¹ä½¿ç”¨

## ğŸ“¸ æ¼”ç¤ºæˆªå›¾

<details>
<summary><b>å…¨å±€è®¾ç½®</b></summary>
<img src="https://img.zhengmi.org/file/1743801673107_1743801661335.jpg" alt="å…¨å±€è®¾ç½®" width="100%">
</details>

<details>
<summary><b>ç½‘ç«™è®¾ç½®</b></summary>
<img src="https://img.zhengmi.org/file/1743801939121_image.png" alt="ç½‘ç«™è®¾ç½®" width="100%">
</details>

<details>
<summary><b>æš—è‰²æ¨¡å¼</b></summary>
<img src="https://img.zhengmi.org/file/1743801684425_image.png" alt="æš—è‰²æ¨¡å¼" width="100%">
</details>

<details>
<summary><b>æ‹–æ‹½æ’åºï¼ˆæš—è‰²ï¼‰</b></summary>
<img src="https://img.zhengmi.org/file/1743801720324_image.png" alt="æ‹–æ‹½æ’åºï¼ˆæš—è‰²ï¼‰" width="100%">
</details>

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

### å‰ç«¯æŠ€æœ¯
-   âš›ï¸ **React 19** - æœ€æ–°ç‰ˆæœ¬ï¼Œæè‡´æ€§èƒ½
-   ğŸ“˜ **TypeScript 5.7** - ç±»å‹å®‰å…¨ï¼Œæ™ºèƒ½æç¤º
-   ğŸ¨ **Material UI 7.0** - Google è®¾è®¡è¯­è¨€ï¼Œå¼€ç®±å³ç”¨
-   ğŸª **DND Kit** - æµç•…çš„æ‹–æ‹½äº¤äº’ä½“éªŒ
-   ğŸŒŠ **Tailwind CSS 4.1** - åŸå­åŒ– CSSï¼Œå¿«é€Ÿå¼€å‘
-   âš¡ **Vite 6** - æé€Ÿæ„å»ºå·¥å…·ï¼Œæ¯«ç§’çº§ HMR

### åç«¯æŠ€æœ¯
-   â˜ï¸ **Cloudflare Workers** - è¾¹ç¼˜è®¡ç®—ï¼Œå…¨çƒéƒ¨ç½²
-   ğŸ—„ï¸ **Cloudflare D1** - åˆ†å¸ƒå¼ SQLite æ•°æ®åº“
-   ğŸ” **JWT + bcrypt** - å·¥ä¸šçº§èº«ä»½è®¤è¯
-   ğŸ›¡ï¸ **TypeScript Strict Mode** - å…¨æ ˆç±»å‹å®‰å…¨

### å¼€å‘å·¥å…·
-   ğŸ“¦ **pnpm** - é«˜æ•ˆçš„åŒ…ç®¡ç†å™¨
-   ğŸ”¨ **Wrangler CLI** - Cloudflare å®˜æ–¹å¼€å‘å·¥å…·
-   ğŸ¯ **ESLint + Prettier** - ä»£ç è´¨é‡ä¿éšœ

## ğŸš€ éƒ¨ç½²æŒ‡å—

NaviHive æä¾›ä¸¤ç§éƒ¨ç½²æ–¹æ¡ˆï¼Œè¯·æ ¹æ®æ‚¨çš„æŠ€æœ¯èƒŒæ™¯é€‰æ‹©åˆé€‚çš„æ–¹å¼ã€‚

---

## ğŸ“¦ æ–¹æ¡ˆä¸€ï¼šå°ç™½ç”¨æˆ·éƒ¨ç½²ï¼ˆæ¨èæ–°æ‰‹ï¼‰

> é€‚åˆä¸ç†Ÿæ‚‰ç¼–ç¨‹çš„ç”¨æˆ·ï¼Œé€šè¿‡ç½‘é¡µç•Œé¢å®Œæˆå…¨éƒ¨éƒ¨ç½²æµç¨‹ï¼Œæ— éœ€å®‰è£…ä»»ä½•å¼€å‘å·¥å…·ã€‚

### å‡†å¤‡å·¥ä½œ

1. æ³¨å†Œä¸€ä¸ªå…è´¹çš„ [Cloudflare è´¦å·](https://dash.cloudflare.com/sign-up)
2. æ³¨å†Œä¸€ä¸ª [GitHub è´¦å·](https://github.com/signup)ï¼ˆç”¨äº fork é¡¹ç›®ï¼‰

### éƒ¨ç½²æ­¥éª¤

#### ç¬¬ä¸€æ­¥ï¼šFork é¡¹ç›®

1. è®¿é—®æœ¬é¡¹ç›®çš„ GitHub é¡µé¢
2. ç‚¹å‡»å³ä¸Šè§’çš„ **Fork** æŒ‰é’®ï¼Œå°†é¡¹ç›®å¤åˆ¶åˆ°ä½ çš„è´¦å·ä¸‹

#### ç¬¬äºŒæ­¥ï¼šä¸€é”®éƒ¨ç½²åˆ° Cloudflare

1. åœ¨ä½  fork çš„é¡¹ç›®é¡µé¢ï¼Œç‚¹å‡»é¡¶éƒ¨çš„ **Deploy to Cloudflare Workers** æŒ‰é’®
2. ç™»å½•ä½ çš„ Cloudflare è´¦å·
3. æˆæƒ GitHub è®¿é—®æƒé™
4. ç³»ç»Ÿä¼šè‡ªåŠ¨å¼€å§‹éƒ¨ç½²æµç¨‹

> å¦‚æœä¸€é”®éƒ¨ç½²æŒ‰é’®æ— æ³•ä½¿ç”¨ï¼Œå¯ä»¥ç›´æ¥è¿›å…¥ç¬¬ä¸‰æ­¥æ‰‹åŠ¨åˆ›å»ºã€‚

#### ç¬¬ä¸‰æ­¥ï¼šåˆ›å»º D1 æ•°æ®åº“

1. ç™»å½• [Cloudflare æ§åˆ¶å°](https://dash.cloudflare.com/)
2. åœ¨å·¦ä¾§èœå•é€‰æ‹© **Workers & Pages**
3. ç‚¹å‡»å³ä¾§çš„ **D1 SQL Database** æ ‡ç­¾
4. ç‚¹å‡» **Create database** æŒ‰é’®
5. è¾“å…¥æ•°æ®åº“åç§°ï¼š`navigation-db`
6. ç‚¹å‡» **Create** å®Œæˆåˆ›å»º
7. **è®°ä¸‹æ•°æ®åº“ ID**ï¼ˆæ ¼å¼ç±»ä¼¼ï¼š`43ff28e1-42d6-4e53-9657-0702ae1353b6`ï¼‰

![åˆ›å»º D1 æ•°æ®åº“](https://img.zhengmi.org/file/1743843332374_image.png)

#### ç¬¬å››æ­¥ï¼šé…ç½®é¡¹ç›®

1. åœ¨ Cloudflare æ§åˆ¶å°ï¼Œè¿›å…¥ **Workers & Pages**
2. å¦‚æœå·²é€šè¿‡ä¸€é”®éƒ¨ç½²åˆ›å»ºäº† Workerï¼Œé€‰æ‹©è¯¥é¡¹ç›®ï¼›å¦åˆ™ç‚¹å‡» **Create Application** > **Create Worker**
3. è¿›å…¥é¡¹ç›®åï¼Œç‚¹å‡» **Settings** > **Variables**
4. æ·»åŠ ä»¥ä¸‹ç¯å¢ƒå˜é‡ï¼š

| å˜é‡å | å€¼ | è¯´æ˜ |
|--------|-----|------|
| `AUTH_ENABLED` | `true` | å¯ç”¨ç™»å½•è®¤è¯ |
| `AUTH_REQUIRED_FOR_READ` | `false` | æ˜¯å¦è¦æ±‚è®¿å®¢è®¤è¯ã€‚`false` å¯ç”¨å…ç™»é™†åªè¯»æ¨¡å¼ |
| `AUTH_USERNAME` | `admin` | ç®¡ç†å‘˜ç”¨æˆ·åï¼ˆå¯è‡ªå®šä¹‰ï¼‰ |
| `AUTH_PASSWORD` | è§ä¸‹æ–¹è¯´æ˜ | ç®¡ç†å‘˜å¯†ç ï¼ˆbcrypt å“ˆå¸Œï¼‰ |
| `AUTH_SECRET` | è§ä¸‹æ–¹è¯´æ˜ | JWT å¯†é’¥ï¼ˆéšæœºå­—ç¬¦ä¸²ï¼‰ |

> å¦‚æœéœ€è¦å®Œå…¨å…³é—­è®¿å®¢è®¿é—®ï¼Œå°† `AUTH_REQUIRED_FOR_READ` è®¾ç½®ä¸º `true` å¹¶é‡æ–°éƒ¨ç½²ï¼›ä¿ç•™é»˜è®¤çš„ `false` å³è¡¨ç¤ºå¯ç”¨å…¬å¼€çš„åªè¯»æ¨¡å¼ã€‚

**è®¾ç½®å¯†ç ï¼ˆé‡è¦ï¼‰ï¼š**
- è®¿é—® [bcrypt åœ¨çº¿ç”Ÿæˆå™¨](https://bcrypt.online/) æˆ–ä½¿ç”¨ [Bcrypt Generator](https://bcrypt-generator.com/)
- è¾“å…¥ä½ æƒ³è¦çš„å¯†ç ï¼Œé€‰æ‹© **10 rounds**
- å¤åˆ¶ç”Ÿæˆçš„å“ˆå¸Œå€¼ï¼ˆæ ¼å¼ç±»ä¼¼ï¼š`$2b$10$abc123...`ï¼‰
- ç²˜è´´åˆ° `AUTH_PASSWORD` å˜é‡ä¸­

**è®¾ç½® JWT å¯†é’¥ï¼š**
- è®¿é—® [éšæœºå­—ç¬¦ä¸²ç”Ÿæˆå™¨](https://www.random.org/strings/)
- ç”Ÿæˆä¸€ä¸ª 32 ä½ä»¥ä¸Šçš„éšæœºå­—ç¬¦ä¸²
- ç²˜è´´åˆ° `AUTH_SECRET` å˜é‡ä¸­

5. ç‚¹å‡» **Settings** > **Bindings** > **Add binding**
6. é€‰æ‹© **D1 database**ï¼ŒVariable name å¡«å†™ `DB`ï¼Œé€‰æ‹©åˆšæ‰åˆ›å»ºçš„ `navigation-db`

#### ç¬¬äº”æ­¥ï¼šåˆå§‹åŒ–æ•°æ®åº“

1. åœ¨ Cloudflare æ§åˆ¶å°ï¼Œè¿›å…¥ **D1 Databases**
2. ç‚¹å‡» `navigation-db` æ•°æ®åº“
3. é€‰æ‹© **Console** æ ‡ç­¾
4. å¤åˆ¶ä»¥ä¸‹ SQL å‘½ä»¤å¹¶æ‰§è¡Œï¼ˆç‚¹å‡» **Execute**ï¼‰ï¼š

```sql
-- åˆ›å»ºåˆ†ç»„è¡¨
CREATE TABLE IF NOT EXISTS groups (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    name TEXT NOT NULL,
    order_num INTEGER NOT NULL,
    is_public INTEGER DEFAULT 1,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- åˆ›å»ºç«™ç‚¹è¡¨
CREATE TABLE IF NOT EXISTS sites (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    group_id INTEGER NOT NULL,
    name TEXT NOT NULL,
    url TEXT NOT NULL,
    icon TEXT,
    description TEXT,
    notes TEXT,
    order_num INTEGER NOT NULL,
    is_public INTEGER DEFAULT 1,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (group_id) REFERENCES groups(id) ON DELETE CASCADE
);

-- åˆ›å»ºé…ç½®è¡¨
CREATE TABLE IF NOT EXISTS configs (
    key TEXT PRIMARY KEY,
    value TEXT NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- æ ‡è®°æ•°æ®åº“å·²åˆå§‹åŒ–
INSERT INTO configs (key, value) VALUES ('DB_INITIALIZED', 'true');

-- åˆ›å»ºåªè¯»æ¨¡å¼æ‰€éœ€ç´¢å¼•
CREATE INDEX IF NOT EXISTS idx_groups_is_public ON groups(is_public);
CREATE INDEX IF NOT EXISTS idx_sites_is_public ON sites(is_public);
```

![æ‰§è¡Œ SQL](https://img.zhengmi.org/file/1743843528319_image.png)

5. ç¡®è®¤æ¯æ¡å‘½ä»¤éƒ½æ‰§è¡ŒæˆåŠŸï¼ˆæ˜¾ç¤º âœ“ Successï¼‰

> å¦‚æœä½ å·²ç»è¿è¡Œè¿‡æ—§ç‰ˆæœ¬çš„ SQLï¼Œåªéœ€åœ¨æ•°æ®åº“æ§åˆ¶å°æ‰§è¡Œ `migrations/002_add_is_public.sql` ä¸­çš„è¯­å¥ï¼Œæˆ–åœ¨æœ¬åœ°ä½¿ç”¨ `wrangler d1 execute navigation-db --file=migrations/002_add_is_public.sql` å³å¯å®Œæˆå­—æ®µå‡çº§ã€‚

#### ç¬¬å…­æ­¥ï¼šè®¿é—®ä½ çš„å¯¼èˆªç«™

1. è¿”å› **Workers & Pages**ï¼Œæ‰¾åˆ°ä½ çš„é¡¹ç›®
2. å¤åˆ¶é¡¹ç›®çš„è®¿é—®åœ°å€ï¼ˆæ ¼å¼ï¼š`https://your-project.username.workers.dev`ï¼‰
3. åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€è¯¥åœ°å€
4. ä½¿ç”¨ä½ è®¾ç½®çš„ç”¨æˆ·åå’Œå¯†ç ç™»å½•
5. ä¸ç™»å½•ç›´æ¥è®¿é—®åŒä¸€ä¸ªé“¾æ¥ï¼Œå¯éªŒè¯è®¿å®¢æ¨¡å¼æ˜¯å¦åªå±•ç¤ºå…¬å¼€åˆ†ç»„ï¼ˆé»˜è®¤å¼€å¯ï¼‰

ğŸ‰ æ­å–œï¼ä½ çš„ NaviHive å¯¼èˆªç«™å·²ç»éƒ¨ç½²æˆåŠŸï¼

---

## ğŸ’» æ–¹æ¡ˆäºŒï¼šå¼€å‘è€…éƒ¨ç½²ï¼ˆæ¨èæœ‰æŠ€æœ¯åŸºç¡€ç”¨æˆ·ï¼‰

> é€‚åˆç†Ÿæ‚‰å‘½ä»¤è¡Œå’Œ Git æ“ä½œçš„å¼€å‘è€…ï¼Œå¯ä»¥æœ¬åœ°å¼€å‘è°ƒè¯•åå†éƒ¨ç½²ã€‚

### ç¯å¢ƒè¦æ±‚

- Node.js 18+ æˆ– 20+
- pnpm 9+ï¼ˆæ¨èï¼‰æˆ– npm
- Git
- Cloudflare è´¦å·

### å¿«é€Ÿå¼€å§‹

#### 1. å…‹éš†é¡¹ç›®

```bash
git clone https://github.com/zqq-nuli/Cloudflare-Navihive.git
cd Cloudflare-Navihive
```

#### 2. å®‰è£…ä¾èµ–

```bash
pnpm install
# æˆ–
npm install
```

#### 3. å®‰è£…å¹¶é…ç½® Wrangler CLI

```bash
# å®‰è£… Wranglerï¼ˆå¦‚æœè¿˜æ²¡å®‰è£…ï¼‰
npm install -g wrangler

# ç™»å½• Cloudflare
wrangler login
```

æµè§ˆå™¨ä¼šè‡ªåŠ¨æ‰“å¼€ï¼Œæˆæƒåè¿”å›ç»ˆç«¯ã€‚

#### 4. åˆ›å»º D1 æ•°æ®åº“

```bash
wrangler d1 create navigation-db
```

æ‰§è¡Œåä¼šè¿”å›æ•°æ®åº“ä¿¡æ¯ï¼Œè®°ä¸‹ `database_id`ï¼š

```
âœ… Successfully created DB 'navigation-db'!

[[d1_databases]]
binding = "DB"
database_name = "navigation-db"
database_id = "43ff28e1-42d6-4e53-9657-0702ae1353b6"  # è¿™æ˜¯ä½ çš„æ•°æ®åº“ ID
```

#### 5. é…ç½® wrangler.jsonc

ç¼–è¾‘é¡¹ç›®æ ¹ç›®å½•çš„ `wrangler.jsonc` æ–‡ä»¶ï¼š

```jsonc
{
    "$schema": "node_modules/wrangler/config-schema.json",
    "name": "navihive",  // å¯è‡ªå®šä¹‰é¡¹ç›®åç§°
    "main": "worker/index.ts",
    "compatibility_date": "2025-04-05",
    "compatibility_flags": ["nodejs_compat"],  // å¿…é¡»å¯ç”¨ Node.js å…¼å®¹
    "assets": {
        "not_found_handling": "single-page-application"
    },
    "observability": {
        "enabled": true
    },
    "d1_databases": [
        {
            "binding": "DB",
            "database_name": "navigation-db",
            "database_id": "ä½ çš„æ•°æ®åº“ID"  // æ›¿æ¢ä¸ºç¬¬4æ­¥è·å¾—çš„ database_id
        }
    ],
    "vars": {
        "AUTH_ENABLED": "true",
        "AUTH_REQUIRED_FOR_READ": "false",  // å…ç™»é™†è®¿é—®å¼€å…³ï¼Œtrue è¡¨ç¤ºå¿…é¡»ç™»å½•
        "AUTH_USERNAME": "admin",  // è‡ªå®šä¹‰ç®¡ç†å‘˜ç”¨æˆ·å
        "AUTH_PASSWORD": "è§ä¸‹æ–¹è¯´æ˜",  // bcrypt å“ˆå¸Œå€¼
        "AUTH_SECRET": "è§ä¸‹æ–¹è¯´æ˜"  // 32ä½éšæœºå­—ç¬¦ä¸²
    }
}
```

#### 6. ç”Ÿæˆå®‰å…¨å¯†ç 

é¡¹ç›®å†…ç½®äº†å¯†ç å“ˆå¸Œç”Ÿæˆå·¥å…·ï¼š

```bash
pnpm hash-password YourSecurePassword123
```

è¾“å‡ºç¤ºä¾‹ï¼š

```
æ­£åœ¨ç”Ÿæˆå¯†ç å“ˆå¸Œ...

ç”Ÿæˆçš„å¯†ç å“ˆå¸Œ:
$2b$10$awC3.nc/XrxkAf6BbEbf.O1YqFUFIUIsbmgQL3pstjjYZpXfFtSGi

è¯·å°†æ­¤å“ˆå¸Œå€¼è®¾ç½®ä¸º AUTH_PASSWORD ç¯å¢ƒå˜é‡
```

å°†ç”Ÿæˆçš„å“ˆå¸Œå€¼å¤åˆ¶åˆ° `wrangler.jsonc` çš„ `AUTH_PASSWORD` å­—æ®µã€‚

#### 7. ç”Ÿæˆ JWT å¯†é’¥

åœ¨ç»ˆç«¯æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ç”Ÿæˆéšæœºå¯†é’¥ï¼š

```bash
# macOS/Linux
openssl rand -hex 32

# Windows (PowerShell)
[System.Convert]::ToBase64String([System.Security.Cryptography.RandomNumberGenerator]::GetBytes(32))

# æˆ–ä½¿ç”¨ Node.js
node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
```

å°†ç”Ÿæˆçš„å­—ç¬¦ä¸²å¤åˆ¶åˆ° `wrangler.jsonc` çš„ `AUTH_SECRET` å­—æ®µã€‚

#### 8. åˆå§‹åŒ–æ•°æ®åº“

```bash
wrangler d1 execute navigation-db --file=init_table.sql
wrangler d1 execute navigation-db --file=migrations/002_add_is_public.sql
```

ä¸Šè¿°ä¸¤æ­¥ä¼šåˆ›å»ºåŸºç¡€è¡¨ç»“æ„ï¼Œå¹¶ä¸ºåˆ†ç»„/ç«™ç‚¹æ·»åŠ  `is_public` å­—æ®µä¸ç´¢å¼•ã€‚å¦‚æœä½ æ›´ä¹ æƒ¯ç›´æ¥æ‰§è¡Œ SQLï¼Œä¹Ÿå¯ä»¥å‚è€ƒ `init_table.sql` ä¸ `migrations/002_add_is_public.sql` å†…çš„è¯­å¥æ‰‹åŠ¨æ‰§è¡Œã€‚

#### 9. æœ¬åœ°å¼€å‘æµ‹è¯•ï¼ˆå¯é€‰ï¼‰

```bash
pnpm dev
```

è®¿é—® `http://localhost:5173` è¿›è¡Œæœ¬åœ°æµ‹è¯•ã€‚

> æ³¨æ„ï¼šæœ¬åœ°å¼€å‘é»˜è®¤ä½¿ç”¨ Mock æ•°æ®ï¼Œå¦‚éœ€æµ‹è¯•çœŸå® APIï¼Œè®¾ç½®ç¯å¢ƒå˜é‡ `VITE_USE_REAL_API=true`ã€‚

#### 10. éƒ¨ç½²åˆ° Cloudflare

```bash
pnpm run deploy
# æˆ–
npm run deploy
```

éƒ¨ç½²æˆåŠŸåï¼Œç»ˆç«¯ä¼šæ˜¾ç¤ºè®¿é—®åœ°å€ï¼š

```
Deployed navihive triggers (0.37 sec)
  https://navihive.your-username.workers.dev
Current Version ID: fe495e75-cc21-4a02-81d2-f14a4850c134
```

### å¼€å‘å¸¸ç”¨å‘½ä»¤

```bash
# æœ¬åœ°å¼€å‘
pnpm dev

# æ„å»ºé¡¹ç›®
pnpm build

# éƒ¨ç½²åˆ° Cloudflare
pnpm run deploy

# ç”Ÿæˆå¯†ç å“ˆå¸Œ
pnpm hash-password <your-password>

# æŸ¥çœ‹ Cloudflare æ—¥å¿—
wrangler tail

# å¯¼å‡ºæ•°æ®åº“
wrangler d1 export navigation-db

# æŸ¥è¯¢æ•°æ®åº“
wrangler d1 execute navigation-db --command="SELECT * FROM groups"

# éªŒè¯å…ç™»é™† API
curl https://<your-worker>.workers.dev/api/groups
```

> å°† `<your-worker>` æ›¿æ¢ä¸ºä½ çš„ Workers å­åŸŸåã€‚æœªç™»å½•å³å¯çœ‹åˆ°å…¬å¼€åˆ†ç»„åˆ™è¡¨ç¤ºå…ç™»é™†æ¨¡å¼é…ç½®æ­£ç¡®ã€‚

### é…ç½®è‡ªå®šä¹‰åŸŸå

1. åœ¨ Cloudflare æ§åˆ¶å°ï¼Œè¿›å…¥ **Workers & Pages**
2. é€‰æ‹©ä½ çš„é¡¹ç›®ï¼Œç‚¹å‡» **Settings** > **Triggers**
3. åœ¨ **Custom Domains** éƒ¨åˆ†ç‚¹å‡» **Add Custom Domain**
4. è¾“å…¥åŸŸåå¹¶å®Œæˆ DNS éªŒè¯

---

## ğŸ”„ æ•°æ®åº“è¿ç§»ä¸å¤‡ä»½

### å¯¼å‡ºæ•°æ®

```bash
# å¯¼å‡ºæ•´ä¸ªæ•°æ®åº“
wrangler d1 export navigation-db

# å¯¼å‡ºä¸º JSONï¼ˆé€šè¿‡ Web ç•Œé¢ï¼‰
# ç™»å½•åç‚¹å‡»"ç½‘ç«™è®¾ç½®" > "å¯¼å‡ºæ•°æ®"
```

### å¯¼å…¥æ•°æ®

```bash
# ä» SQL æ–‡ä»¶å¯¼å…¥
wrangler d1 execute navigation-db --file=backup.sql

# é€šè¿‡ Web ç•Œé¢å¯¼å…¥ JSON
# ç™»å½•åç‚¹å‡»"ç½‘ç«™è®¾ç½®" > "å¯¼å…¥æ•°æ®"
```

## ğŸ§­ å…ç™»é™†è®¿é—®éƒ¨ç½²ä¸æ—§é¡¹ç›®è¿ç§»

### æ–°éƒ¨ç½² Checklist
- é…ç½® `AUTH_REQUIRED_FOR_READ=false`ï¼ˆé»˜è®¤å€¼ï¼‰ä»¥å…è®¸è®¿å®¢è®¿é—®å…¬å¼€åˆ†ç»„ï¼Œè‹¥å¸Œæœ›å®Œå…¨ç§æœ‰å¯æ”¹ä¸º `true`
- åˆå§‹åŒ–æ•°æ®åº“åç«‹å³æ‰§è¡Œ `migrations/002_add_is_public.sql`ï¼Œç¡®ä¿ `is_public` å­—æ®µå’Œç´¢å¼•å°±ç»ª
- åœ¨ Cloudflare æ§åˆ¶å°æˆ– `wrangler tail` ä¸­ç¡®è®¤åå°æ—¥å¿—å­˜åœ¨ `å…è®¸å…è®¤è¯è®¿é—®` å­—æ ·
- è®¿é—® `/api/groups`ã€`/api/sites` æµ‹è¯•æ—  Token è¯·æ±‚æ˜¯å¦åªè¿”å›å…¬å¼€æ•°æ®

### æ—§ç‰ˆæœ¬ (â‰¤ v1.0.x) å‡çº§åˆ°å…ç™»é™†è®¿é—®
1. **å¤‡ä»½æ•°æ®**ï¼š`wrangler d1 export navigation-db > backup.sql`
2. **æ‹‰å–æœ€æ–°ä»£ç **ï¼š`git pull` åé‡æ–°å®‰è£…ä¾èµ–ï¼ˆå¦‚æœ‰å¿…è¦ï¼‰
3. **æ–°å¢ç¯å¢ƒå˜é‡**ï¼šåœ¨ `wrangler.jsonc` å’Œ Cloudflare æ§åˆ¶å°åŒæ—¶æ·»åŠ  `AUTH_REQUIRED_FOR_READ`ï¼Œæ¨èè®¾ç½®ä¸º `false`
4. **æ‰§è¡Œæ•°æ®åº“è¿ç§»**ï¼š
   ```bash
   wrangler d1 execute navigation-db --file=migrations/002_add_is_public.sql
   # ç”Ÿäº§ç¯å¢ƒå¯åœ¨ Cloudflare D1 æ§åˆ¶å°æ‰§è¡ŒåŒæ ·çš„ SQL
   ```
5. **é‡æ–°éƒ¨ç½²**ï¼š`pnpm build && pnpm deploy`ï¼ˆæˆ–ä½¿ç”¨ GitHub Action/ä¸€é”®éƒ¨ç½²æŒ‰é’®ï¼‰
6. **éªŒè¯**ï¼š
   - è®¿å®¢ç›´æ¥è®¿é—®ç½‘é¡µä»…çœ‹åˆ° `is_public=1` çš„åˆ†ç»„ä¸ç«™ç‚¹
   - ç®¡ç†å‘˜ç™»å½•åå¯è§å…¨éƒ¨å†…å®¹ï¼Œå†™æ“ä½œä»éœ€è®¤è¯
   - `wrangler tail` ä¸­æ— æœªç»æˆæƒçš„å†™æ“ä½œæ—¥å¿—

> å¦‚æœéœ€è¦æš‚æ—¶å…³é—­è®¿å®¢è®¿é—®ï¼Œæ— éœ€å›æ»šæ•°æ®åº“ï¼Œåªéœ€å°† `AUTH_REQUIRED_FOR_READ` æ”¹ä¸º `true` å¹¶é‡æ–°éƒ¨ç½²å³å¯ã€‚

## ğŸ“ ä½¿ç”¨æŒ‡å—

### ğŸšª è®¿å®¢æ¨¡å¼æ–°åŠŸèƒ½ï¼

NaviHive v1.1.0 å¼•å…¥äº†**è®¿å®¢æ¨¡å¼**ï¼Œå…è®¸æœªç™»å½•ç”¨æˆ·æŸ¥çœ‹å…¬å¼€å†…å®¹ï¼š

- ğŸŒ **å…¬å¼€è®¿é—®**ï¼šæ— éœ€ç™»å½•å³å¯æµè§ˆå…¬å¼€åˆ†ç»„å’Œç«™ç‚¹
- ğŸ” **éšç§ä¿æŠ¤**ï¼šç§å¯†å†…å®¹ä»…å¯¹ç®¡ç†å‘˜å¯è§
- âš¡ **çµæ´»é…ç½®**ï¼šé€šè¿‡ `AUTH_REQUIRED_FOR_READ` å¼€å…³æ§åˆ¶
- ğŸ¯ **ç²¾ç»†æƒé™**ï¼šæ¯ä¸ªåˆ†ç»„å’Œç«™ç‚¹éƒ½å¯ä»¥ç‹¬ç«‹è®¾ç½®å…¬å¼€/ç§å¯†çŠ¶æ€

> ğŸ’¡ é»˜è®¤å¯ç”¨è®¿å®¢æ¨¡å¼ï¼Œå¦‚éœ€å®Œå…¨ç§æœ‰åŒ–ï¼Œå°† `AUTH_REQUIRED_FOR_READ` è®¾ä¸º `true`

---

### ğŸšª ç™»å½•ç³»ç»Ÿ

é¦–æ¬¡è®¿é—®å¯¼èˆªç«™æ—¶ï¼Œä½¿ç”¨éƒ¨ç½²æ—¶è®¾ç½®çš„ç®¡ç†å‘˜è´¦å·ç™»å½•ï¼š

1. åœ¨ç™»å½•é¡µé¢è¾“å…¥ç”¨æˆ·åå’Œå¯†ç 
2. å¯é€‰æ‹©"è®°ä½æˆ‘"å»¶é•¿ç™»å½•æ—¶æ•ˆï¼ˆ30 å¤©ï¼‰
3. ç™»å½•æˆåŠŸåï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨è·³è½¬åˆ°å¯¼èˆªä¸»é¡µ

### ğŸ‘€ è®¿å®¢æ¨¡å¼ä¸ç¼–è¾‘æ¨¡å¼
- æœªç™»å½•æ—¶é»˜è®¤è¿è¡Œåœ¨ **è®¿å®¢æ¨¡å¼**ï¼Œåªå±•ç¤º `is_public = 1` çš„åˆ†ç»„ä¸ç«™ç‚¹ï¼Œä»»ä½•å†™æ“ä½œå…¥å£å‡è¢«éšè—
- ç™»å½•åè‡ªåŠ¨åˆ‡æ¢åˆ° **ç¼–è¾‘æ¨¡å¼**ï¼Œå¯æ–°å¢/æ’åº/åˆ é™¤å†…å®¹ï¼›ç™»å‡ºä¼šå›åˆ°è®¿å®¢æ¨¡å¼
- è®¿å®¢æ¨¡å¼å¼€å…³ç”± `AUTH_REQUIRED_FOR_READ` æ§åˆ¶ï¼›æ”¹ä¸º `true` å¯æ¢å¤æ—§ç‰ˆâ€œå¿…é¡»ç™»å½•æ‰èƒ½è®¿é—®â€ä½“éªŒ
- éœ€è¦å°†æŸä¸ªåˆ†ç»„æˆ–ç«™ç‚¹è®¾ä¸ºç§å¯†æ—¶ï¼Œå¯åœ¨ Cloudflare D1 æ§åˆ¶å°æ‰§è¡Œ `UPDATE groups SET is_public = 0 WHERE id = ?;` / `UPDATE sites SET is_public = 0 WHERE id = ?;`ï¼ˆå³å°†ä¸Šçº¿çš„ UI å¼€å…³ä¼šè¿›ä¸€æ­¥ç®€åŒ–è¯¥æµç¨‹ï¼‰

### âš™ï¸ é…ç½®å¯¼èˆªç«™

#### æ·»åŠ åˆ†ç»„
1. ç‚¹å‡»é¡µé¢é¡¶éƒ¨çš„ **"æ–°å¢åˆ†ç»„"** æŒ‰é’®
2. è¾“å…¥åˆ†ç»„åç§°ï¼ˆå¦‚"å¸¸ç”¨å·¥å…·"ã€"å¼€å‘èµ„æº"ç­‰ï¼‰
3. ç‚¹å‡»ç¡®è®¤å®Œæˆåˆ›å»º

#### æ·»åŠ ç½‘ç«™
1. åœ¨å¯¹åº”åˆ†ç»„ä¸­ç‚¹å‡» **"æ·»åŠ å¡ç‰‡"** æŒ‰é’®
2. å¡«å†™ç½‘ç«™ä¿¡æ¯ï¼š
   - **åç§°**ï¼šç½‘ç«™æ˜¾ç¤ºåç§°
   - **URL**ï¼šç½‘ç«™å®Œæ•´åœ°å€ï¼ˆå¿…é¡»åŒ…å« `https://`ï¼‰
   - **å›¾æ ‡**ï¼ˆå¯é€‰ï¼‰ï¼šç½‘ç«™ Logo å›¾ç‰‡åœ°å€
   - **æè¿°**ï¼ˆå¯é€‰ï¼‰ï¼šç½‘ç«™ç®€ä»‹
   - **å¤‡æ³¨**ï¼ˆå¯é€‰ï¼‰ï¼šä¸ªäººç¬”è®°
3. ç‚¹å‡» **"ä¿å­˜"** å®Œæˆæ·»åŠ 

#### å…¨å±€è®¾ç½®
ç‚¹å‡»å³ä¸Šè§’çš„ **"ç½‘ç«™è®¾ç½®"** æŒ‰é’®ï¼Œå¯ä»¥é…ç½®ï¼š
- **ç½‘ç«™æ ‡é¢˜**ï¼šæµè§ˆå™¨æ ‡ç­¾é¡µæ˜¾ç¤ºçš„æ ‡é¢˜
- **ç½‘ç«™åç§°**ï¼šå¯¼èˆªç«™é¡¶éƒ¨æ˜¾ç¤ºçš„åç§°
- **èƒŒæ™¯å›¾ç‰‡**ï¼šè®¾ç½®é¡µé¢èƒŒæ™¯ï¼ˆæ”¯æŒå›¾ç‰‡ URLï¼‰
- **è’™ç‰ˆé€æ˜åº¦**ï¼šè°ƒæ•´èƒŒæ™¯å›¾ç‰‡çš„å¯è§åº¦
- **è‡ªå®šä¹‰ CSS**ï¼šæ³¨å…¥è‡ªå®šä¹‰æ ·å¼ä»£ç 

#### æ’åºè°ƒæ•´
1. ç‚¹å‡» **"ç¼–è¾‘æ’åº"** æŒ‰é’®è¿›å…¥æ’åºæ¨¡å¼
2. æ‹–æ‹½åˆ†ç»„æˆ–ç½‘ç«™å¡ç‰‡è°ƒæ•´ä½ç½®
3. ç‚¹å‡» **"ä¿å­˜æ’åº"** åº”ç”¨æ›´æ”¹

#### æ•°æ®ç®¡ç†
- **å¯¼å‡ºæ•°æ®**ï¼šåœ¨"ç½‘ç«™è®¾ç½®"ä¸­ç‚¹å‡»"å¯¼å‡ºæ•°æ®"ï¼Œä¸‹è½½ JSON å¤‡ä»½æ–‡ä»¶
- **å¯¼å…¥æ•°æ®**ï¼šç‚¹å‡»"å¯¼å…¥æ•°æ®"é€‰æ‹© JSON æ–‡ä»¶ï¼Œç³»ç»Ÿä¼šæ™ºèƒ½åˆå¹¶æ•°æ®

### ğŸŒ ä½¿ç”¨è‡ªå®šä¹‰åŸŸåï¼ˆå¯é€‰ï¼‰

æƒ³è¦ä½¿ç”¨è‡ªå·±çš„åŸŸåè€Œé `.workers.dev` å­åŸŸåï¼ŸæŒ‰ç…§ä»¥ä¸‹æ­¥éª¤é…ç½®ï¼š

1. ç™»å½• [Cloudflare æ§åˆ¶å°](https://dash.cloudflare.com/)
2. å¯¼èˆªè‡³ **Workers & Pages** > é€‰æ‹©ä½ çš„é¡¹ç›®
3. ç‚¹å‡» **Settings** > **Triggers** æ ‡ç­¾
4. åœ¨ **Custom Domains** åŒºåŸŸç‚¹å‡» **Add Custom Domain**
5. è¾“å…¥ä½ çš„åŸŸåï¼ˆå¦‚ `nav.yourdomain.com`ï¼‰
6. Cloudflare ä¼šè‡ªåŠ¨é…ç½® DNS è®°å½•ï¼Œæ— éœ€æ‰‹åŠ¨æ“ä½œ
7. ç­‰å¾… 1-3 åˆ†é’Ÿï¼ŒSSL è¯ä¹¦è‡ªåŠ¨ç­¾å‘å®Œæˆ

âœ… å®Œæˆåï¼Œä½ å¯ä»¥é€šè¿‡è‡ªå®šä¹‰åŸŸåè®¿é—®å¯¼èˆªç«™ï¼

## ğŸ”§ å¸¸è§é—®é¢˜è§£ç­”

### éƒ¨ç½²ç›¸å…³

**Q: æˆ‘å¿˜è®°äº†ç®¡ç†å‘˜å¯†ç ï¼Œæ€ä¹ˆåŠï¼Ÿ**

A: æœ‰ä¸¤ç§æ–¹æ³•é‡ç½®å¯†ç ï¼š

**æ–¹æ³•ä¸€ï¼šé€šè¿‡ Cloudflare æ§åˆ¶å°**
1. åœ¨æœ¬åœ°ç”Ÿæˆæ–°å¯†ç å“ˆå¸Œï¼ˆå¦‚æœæ²¡æœ‰æœ¬åœ°ç¯å¢ƒï¼Œä½¿ç”¨ [bcrypt åœ¨çº¿ç”Ÿæˆå™¨](https://bcrypt.online/)ï¼‰
2. ç™»å½• [Cloudflare æ§åˆ¶å°](https://dash.cloudflare.com/)
3. è¿›å…¥ **Workers & Pages** > é€‰æ‹©ä½ çš„é¡¹ç›®
4. ç‚¹å‡» **Settings** > **Variables**
5. ä¿®æ”¹ `AUTH_PASSWORD` å˜é‡ä¸ºæ–°çš„å“ˆå¸Œå€¼
6. ç‚¹å‡» **Save** ä¿å­˜ï¼ˆç³»ç»Ÿä¼šè‡ªåŠ¨é‡æ–°éƒ¨ç½²ï¼‰

**æ–¹æ³•äºŒï¼šé€šè¿‡å‘½ä»¤è¡Œï¼ˆå¼€å‘è€…ï¼‰**
```bash
# ç”Ÿæˆæ–°å¯†ç å“ˆå¸Œ
pnpm hash-password NewPassword123

# ç¼–è¾‘ wrangler.jsoncï¼Œæ›´æ–° AUTH_PASSWORD å€¼

# é‡æ–°éƒ¨ç½²
pnpm run deploy
```

---

**Q: æˆ‘æƒ³å…³é—­ç™»å½•è®¤è¯ï¼Œå¯ä»¥å—ï¼Ÿ**

A: å¯ä»¥ã€‚åœ¨ç¯å¢ƒå˜é‡ä¸­å°† `AUTH_ENABLED` è®¾ç½®ä¸º `false` å³å¯ã€‚

âš ï¸ **è­¦å‘Š**ï¼šå…³é—­è®¤è¯åï¼Œä»»ä½•äººéƒ½å¯ä»¥è®¿é—®å’Œä¿®æ”¹ä½ çš„å¯¼èˆªç«™æ•°æ®ï¼Œè¯·è°¨æ…ä½¿ç”¨ã€‚

---

**Q: ç™»å½•æ—¶æç¤º â€œ429 Too Many Requestsâ€ æ€ä¹ˆåŠï¼Ÿ**

A: ç³»ç»Ÿå†…ç½®ç™»å½•é€Ÿç‡é™åˆ¶ï¼ŒåŒä¸€ IP åœ¨ 15 åˆ†é’Ÿå†…æœ€å¤šå°è¯• 5 æ¬¡ã€‚å½“è¶…è¿‡é˜ˆå€¼æ—¶ä¼šè¿”å› 429 å¹¶åœ¨æ—¥å¿—è®°å½• IPã€‚è¯·ç­‰å¾… 15 åˆ†é’Ÿåå†è¯•ï¼Œæˆ–åœ¨ `worker/index.ts` å†… `new SimpleRateLimiter(5, 15)` å¤„è°ƒæ•´é˜ˆå€¼å¹¶é‡æ–°éƒ¨ç½²ã€‚

---

**Q: éƒ¨ç½²åè®¿é—®ç½‘ç«™æ˜¾ç¤º "è¯·å…ˆç™»å½•"ï¼Œä½†æˆ‘è¿˜æ²¡è®¾ç½®æ•°æ®åº“ï¼Ÿ**

A: è¿™æ˜¯æ­£å¸¸ç°è±¡ã€‚è¯·æŒ‰ç…§éƒ¨ç½²æŒ‡å—å®Œæˆæ•°æ®åº“åˆå§‹åŒ–æ­¥éª¤ï¼ˆæ‰§è¡Œ SQL åˆ›å»ºè¡¨ç»“æ„ï¼‰ï¼Œç„¶ååˆ·æ–°é¡µé¢å³å¯ç™»å½•ã€‚

---

**Q: éƒ¨ç½²æ—¶æç¤º "No such module 'crypto'" é”™è¯¯ï¼Ÿ**

A: è¿™æ˜¯å› ä¸ºç¼ºå°‘ Node.js å…¼å®¹æ€§æ ‡å¿—ã€‚è¯·åœ¨ `wrangler.jsonc` ä¸­æ·»åŠ ï¼š

```jsonc
{
    "compatibility_flags": ["nodejs_compat"]
}
```

ç„¶åé‡æ–°éƒ¨ç½²å³å¯ã€‚

---

**Q: å¦‚ä½•æ›´æ–°åˆ°æœ€æ–°ç‰ˆæœ¬ï¼Ÿ**

**å°ç™½ç”¨æˆ·ï¼š**
1. è¿›å…¥ä½  fork çš„ GitHub ä»“åº“
2. ç‚¹å‡» **Sync fork** > **Update branch**
3. åœ¨ Cloudflare æ§åˆ¶å°é‡æ–°éƒ¨ç½²ï¼ˆå¦‚æœä½¿ç”¨äº† GitHub é›†æˆï¼Œä¼šè‡ªåŠ¨éƒ¨ç½²ï¼‰

**å¼€å‘è€…ï¼š**
```bash
# æ‹‰å–æœ€æ–°ä»£ç 
git pull origin main

# é‡æ–°éƒ¨ç½²
pnpm run deploy
```

---

**Q: ä¸€é”®éƒ¨ç½²æŒ‰é’®æ— æ³•ä½¿ç”¨ï¼Ÿ**

A: ä¸€é”®éƒ¨ç½²åŠŸèƒ½éœ€è¦ Cloudflare Workers å’Œ GitHub çš„é›†æˆæ”¯æŒã€‚å¦‚æœæ— æ³•ä½¿ç”¨ï¼Œå»ºè®®ï¼š
- å°ç™½ç”¨æˆ·ï¼šæŒ‰ç…§"æ–¹æ¡ˆä¸€"çš„æ­¥éª¤ 3-6 æ‰‹åŠ¨åˆ›å»º
- å¼€å‘è€…ï¼šç›´æ¥ä½¿ç”¨"æ–¹æ¡ˆäºŒ"å‘½ä»¤è¡Œéƒ¨ç½²

---

### æ•°æ®ç®¡ç†

**Q: å¦‚ä½•å¤‡ä»½æˆ‘çš„å¯¼èˆªæ•°æ®ï¼Ÿ**

**æ–¹æ³•ä¸€ï¼šé€šè¿‡ Web ç•Œé¢ï¼ˆæ¨èï¼‰**
1. ç™»å½•ä½ çš„å¯¼èˆªç«™
2. ç‚¹å‡»å³ä¸Šè§’çš„"ç½‘ç«™è®¾ç½®"æŒ‰é’®
3. ç‚¹å‡»"å¯¼å‡ºæ•°æ®"æŒ‰é’®
4. ä¿å­˜ä¸‹è½½çš„ JSON æ–‡ä»¶

**æ–¹æ³•äºŒï¼šé€šè¿‡å‘½ä»¤è¡Œï¼ˆå¼€å‘è€…ï¼‰**
```bash
wrangler d1 export navigation-db
```

---

**Q: å¦‚ä½•å¯¼å…¥æ•°æ®ï¼Ÿ**

1. ç™»å½•ä½ çš„å¯¼èˆªç«™
2. ç‚¹å‡»"ç½‘ç«™è®¾ç½®" > "å¯¼å…¥æ•°æ®"
3. é€‰æ‹©ä¹‹å‰å¯¼å‡ºçš„ JSON æ–‡ä»¶
4. ç¡®è®¤å¯¼å…¥ï¼ˆä¼šè‡ªåŠ¨åˆå¹¶æ•°æ®ï¼Œä¸ä¼šè¦†ç›–ç°æœ‰æ•°æ®ï¼‰

---

**Q: æ•°æ®åº“ç»“æ„æ˜¯ä»€ä¹ˆï¼Ÿå¦‚ä½•ç›´æ¥æ“ä½œæ•°æ®ï¼Ÿ**

NaviHive ä½¿ç”¨ä¸‰ä¸ªä¸»è¦è¡¨ï¼š

```sql
-- åˆ†ç»„è¡¨
groups (id, name, order_num, created_at, updated_at)

-- ç½‘ç«™è¡¨
sites (id, group_id, name, url, icon, description, notes, order_num, created_at, updated_at)

-- é…ç½®è¡¨
configs (key, value, created_at, updated_at)
```

é€šè¿‡ Cloudflare æ§åˆ¶å° > D1 Databases > Console å¯ä»¥ç›´æ¥æ‰§è¡Œ SQL æŸ¥è¯¢ã€‚

---

**Q: å¯¼å…¥æ•°æ®æ—¶æç¤º "æ— æ•ˆçš„ JSON æ ¼å¼" æ€ä¹ˆåŠï¼Ÿ**

A: è¯·ç¡®ä¿ï¼š
1. JSON æ–‡ä»¶æ˜¯é€šè¿‡æœ¬ç³»ç»Ÿå¯¼å‡ºçš„ï¼ˆæ ¼å¼å…¼å®¹ï¼‰
2. æ–‡ä»¶æ²¡æœ‰è¢«ä¿®æ”¹æˆ–æŸå
3. æ–‡ä»¶ç¼–ç ä¸º UTF-8
4. æ–‡ä»¶å¤§å°ä¸è¶…è¿‡ 1MB

---

### ä½¿ç”¨å’Œé…ç½®

**Q: å¦‚ä½•ä½¿ç”¨è‡ªå®šä¹‰åŸŸåï¼Ÿ**

1. ç™»å½• [Cloudflare æ§åˆ¶å°](https://dash.cloudflare.com/)
2. è¿›å…¥ **Workers & Pages** > é€‰æ‹©ä½ çš„é¡¹ç›®
3. ç‚¹å‡» **Settings** > **Triggers**
4. åœ¨ **Custom Domains** éƒ¨åˆ†ç‚¹å‡» **Add Custom Domain**
5. è¾“å…¥ä½ çš„åŸŸåï¼ˆä¾‹å¦‚ï¼šnav.example.comï¼‰
6. æŒ‰ç…§æç¤ºå®Œæˆ DNS é…ç½®ï¼ˆCloudflare ä¼šè‡ªåŠ¨æ·»åŠ  DNS è®°å½•ï¼‰
7. ç­‰å¾…å‡ åˆ†é’Ÿç”Ÿæ•ˆ

---

**Q: å¦‚ä½•è‡ªå®šä¹‰ç½‘ç«™æ ·å¼ï¼ˆCSSï¼‰ï¼Ÿ**

1. ç™»å½•ä½ çš„å¯¼èˆªç«™
2. ç‚¹å‡»"ç½‘ç«™è®¾ç½®"
3. åœ¨"è‡ªå®šä¹‰ CSS"æ–‡æœ¬æ¡†ä¸­è¾“å…¥ä½ çš„ CSS ä»£ç 
4. ç‚¹å‡»"ä¿å­˜"

ç¤ºä¾‹ï¼š
```css
/* ä¿®æ”¹èƒŒæ™¯é¢œè‰² */
body {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
}

/* ä¿®æ”¹å¡ç‰‡æ ·å¼ */
.MuiCard-root {
    border-radius: 16px !important;
    box-shadow: 0 8px 32px rgba(0,0,0,0.1) !important;
}
```

---

**Q: æ‹–æ‹½æ’åºåæ²¡æœ‰ä¿å­˜æˆåŠŸï¼Ÿ**

A: è¯·ç¡®ä¿ï¼š
1. ç‚¹å‡»äº†"ä¿å­˜æ’åº"æŒ‰é’®
2. ç­‰å¾…ä¿å­˜æˆåŠŸæç¤ºï¼ˆä¸è¦ç«‹å³å…³é—­é¡µé¢ï¼‰
3. æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°æ˜¯å¦æœ‰é”™è¯¯ä¿¡æ¯
4. ç¡®è®¤å·²ç™»å½•ä¸” Token æœªè¿‡æœŸ

---

**Q: ç½‘ç«™å›¾æ ‡ (icon) ä¸æ˜¾ç¤ºï¼Ÿ**

A: å¯èƒ½çš„åŸå› ï¼š
1. **URL æ ¼å¼é”™è¯¯**ï¼šç¡®ä¿ icon å­—æ®µå¡«å†™çš„æ˜¯å®Œæ•´çš„å›¾ç‰‡ URLï¼ˆå¦‚ `https://example.com/logo.png`ï¼‰
2. **CORS é™åˆ¶**ï¼šæŸäº›ç½‘ç«™ä¸å…è®¸è·¨åŸŸè®¿é—®å›¾ç‰‡
3. **ä½¿ç”¨ç›¸å¯¹è·¯å¾„**ï¼šå¦‚æœå›¾æ ‡åœ¨æœ¬åœ°ï¼Œéœ€è¦ä¸Šä¼ åˆ°å›¾åºŠåä½¿ç”¨ç»å¯¹è·¯å¾„
4. **æ¨èæ–¹æ¡ˆ**ï¼šä½¿ç”¨ç½‘ç«™çš„ faviconï¼ˆå¦‚ `https://example.com/favicon.ico`ï¼‰

---

**Q: å¦‚ä½•è®¾ç½®èƒŒæ™¯å›¾ç‰‡ï¼Ÿ**

1. ç™»å½•ä½ çš„å¯¼èˆªç«™
2. ç‚¹å‡»"ç½‘ç«™è®¾ç½®"
3. åœ¨"èƒŒæ™¯å›¾ç‰‡ URL"ä¸­å¡«å…¥å›¾ç‰‡åœ°å€
4. è°ƒæ•´"è’™ç‰ˆé€æ˜åº¦"ä»¥æ§åˆ¶èƒŒæ™¯çš„å¯è§åº¦
5. ç‚¹å‡»"ä¿å­˜"

---

### å®‰å…¨ç›¸å…³

**Q: å¯†ç å®‰å…¨å—ï¼Ÿä¼šè¢«ç ´è§£å—ï¼Ÿ**

A: NaviHive ä½¿ç”¨äº†å¤šå±‚å®‰å…¨æªæ–½ï¼š
- å¯†ç ä½¿ç”¨ bcrypt å“ˆå¸ŒåŠ å¯†ï¼ˆ10 è½®ç›å€¼ï¼‰ï¼Œå‡ ä¹æ— æ³•æš´åŠ›ç ´è§£
- JWT Token æœ‰æ•ˆæœŸé™åˆ¶ï¼ˆ7 å¤©æˆ– 30 å¤©ï¼‰
- æ‰€æœ‰ API è¯·æ±‚éƒ½éœ€è¦èº«ä»½éªŒè¯
- Token å­˜å‚¨åœ¨ HttpOnly Cookie ä¸­ï¼Œé˜²æ­¢ XSS æ”»å‡»

åªè¦ä½ çš„å¯†ç è¶³å¤Ÿå¤æ‚ï¼ˆå»ºè®® 12 ä½ä»¥ä¸Šï¼ŒåŒ…å«å¤§å°å†™å­—æ¯ã€æ•°å­—å’Œç‰¹æ®Šå­—ç¬¦ï¼‰ï¼Œå°±éå¸¸å®‰å…¨ã€‚

---

**Q: æˆ‘å¯ä»¥ç¦ç”¨ HTTPS å—ï¼Ÿ**

A: ä¸å¯ä»¥ã€‚Cloudflare Workers å¼ºåˆ¶ä½¿ç”¨ HTTPSï¼Œè¿™æ˜¯ä¸ºäº†ä¿è¯ä½ çš„æ•°æ®ä¼ è¾“å®‰å…¨ã€‚

---

**Q: å…¶ä»–äººèƒ½è®¿é—®æˆ‘çš„å¯¼èˆªç«™å—ï¼Ÿ**

A:
- `AUTH_REQUIRED_FOR_READ=false`ï¼ˆé»˜è®¤ï¼‰ï¼šæœªç™»å½•ç”¨æˆ·å¯ä»¥è®¿é—®å…¬å¼€åˆ†ç»„/ç«™ç‚¹ï¼Œä½†æ— æ³•çœ‹åˆ°ç§å¯†å†…å®¹ï¼Œä¹Ÿæ²¡æœ‰å†™æƒé™
- `AUTH_REQUIRED_FOR_READ=true`ï¼šæœªç™»å½•ç”¨æˆ·ä¼šè¢«è¦æ±‚å…ˆç™»å½•ï¼Œè¡Œä¸ºä¸æ—§ç‰ˆæœ¬ä¸€è‡´
- å·²ç™»å½•ç®¡ç†å‘˜ä»ç„¶æ‹¥æœ‰å…¨éƒ¨å¢åˆ æ”¹æŸ¥æƒé™
- å»ºè®®ä¸ºæ•æ„Ÿå†…å®¹è®¾ç½® `is_public = 0`ï¼Œå¹¶ä»…åˆ†äº«å…¬å¼€é“¾æ¥ç»™è®¿å®¢

**Q: å¦‚ä½•å…³é—­ï¼ˆæˆ–é‡æ–°å¼€å¯ï¼‰è®¿å®¢è®¿é—®ï¼Ÿ**

A:
1. åœ¨ `wrangler.jsonc` åŠ Cloudflare æ§åˆ¶å°æŠŠ `AUTH_REQUIRED_FOR_READ` æ”¹ä¸ºç›®æ ‡å€¼ï¼ˆ`true`=å…³é—­è®¿å®¢ï¼Œ`false`=å¼€å¯ï¼‰
2. é‡æ–°éƒ¨ç½² Workerï¼ˆ`pnpm deploy` æˆ–é€šè¿‡ CIï¼‰
3. åˆ·æ–°é¡µé¢åå³å¯ç”Ÿæ•ˆï¼Œæ— éœ€è¿ç§»æ•°æ®åº“

---

### æ€§èƒ½å’Œé™åˆ¶

**Q: Cloudflare Workers å…è´¹ç‰ˆæœ‰ä»€ä¹ˆé™åˆ¶ï¼Ÿ**

A: å…è´¹ç‰ˆé™åˆ¶ï¼š
- æ¯å¤© 100,000 æ¬¡è¯·æ±‚
- CPU æ—¶é—´ï¼š10ms/è¯·æ±‚
- D1 æ•°æ®åº“ï¼šæ¯å¤© 100,000 æ¬¡è¯»å–ï¼Œ1,000 æ¬¡å†™å…¥
- å­˜å‚¨ç©ºé—´ï¼š500MB

å¯¹äºä¸ªäººå¯¼èˆªç«™æ¥è¯´ï¼Œè¿™äº›é™åˆ¶ç»°ç»°æœ‰ä½™ã€‚

---

**Q: æˆ‘å¯ä»¥å¯¼å…¥å¤šå°‘ä¸ªç½‘ç«™ï¼Ÿ**

A: ç†è®ºä¸Šæ²¡æœ‰é™åˆ¶ï¼Œä½†å®é™…å—é™äºï¼š
- D1 æ•°æ®åº“å¤§å°ï¼ˆå…è´¹ç‰ˆ 500MBï¼‰
- å•ä¸ªå¯¼å…¥æ–‡ä»¶å¤§å°ï¼ˆ1MBï¼‰
- æµè§ˆå™¨æ€§èƒ½ï¼ˆè¿‡å¤šç½‘ç«™å¯èƒ½å¯¼è‡´é¡µé¢å¡é¡¿ï¼‰

å»ºè®®æ¯ä¸ªåˆ†ç»„ä¸è¶…è¿‡ 20 ä¸ªç½‘ç«™ï¼Œæ€»æ•°ä¸è¶…è¿‡ 500 ä¸ªã€‚

---

**Q: å¦‚ä½•æŸ¥çœ‹éƒ¨ç½²æ—¥å¿—å’Œé”™è¯¯ä¿¡æ¯ï¼Ÿ**

**é€šè¿‡ Cloudflare æ§åˆ¶å°ï¼š**
1. è¿›å…¥ **Workers & Pages** > é€‰æ‹©ä½ çš„é¡¹ç›®
2. ç‚¹å‡» **Logs** æ ‡ç­¾
3. æŸ¥çœ‹å®æ—¶æ—¥å¿—

**é€šè¿‡å‘½ä»¤è¡Œï¼ˆå¼€å‘è€…ï¼‰ï¼š**
```bash
wrangler tail
```

---

### å…¶ä»–é—®é¢˜

**Q: æˆ‘èƒ½ä¿®æ”¹ä»£ç å—ï¼Ÿå¯ä»¥å•†ç”¨å—ï¼Ÿ**

A: å¯ä»¥ï¼NaviHive é‡‡ç”¨ MIT å¼€æºè®¸å¯è¯ï¼Œä½ å¯ä»¥ï¼š
- âœ… è‡ªç”±ä¿®æ”¹ä»£ç 
- âœ… å•†ä¸šä½¿ç”¨
- âœ… äºŒæ¬¡å¼€å‘
- âœ… åˆ†å‘å’Œé”€å”®
- âš ï¸ ä½†éœ€ä¿ç•™åŸä½œè€…ç‰ˆæƒå£°æ˜

---

**Q: é‡åˆ°å…¶ä»–é—®é¢˜æ€ä¹ˆåŠï¼Ÿ**

1. æŸ¥çœ‹é¡¹ç›®çš„ [Issues é¡µé¢](https://github.com/zqq-nuli/Cloudflare-Navihive/issues)
2. æœç´¢æ˜¯å¦æœ‰äººé‡åˆ°è¿‡ç±»ä¼¼é—®é¢˜
3. å¦‚æœæ²¡æœ‰ï¼Œåˆ›å»ºæ–° Issue å¹¶è¯¦ç»†æè¿°é—®é¢˜ï¼ˆåŒ…æ‹¬é”™è¯¯ä¿¡æ¯ã€æ“ä½œæ­¥éª¤ã€æµè§ˆå™¨ç‰ˆæœ¬ç­‰ï¼‰

---

## ğŸ—‚ï¸ é¡¹ç›®ç»“æ„

```
Cloudflare-Navihive/
â”œâ”€â”€ worker/                  # Cloudflare Workers åç«¯
â”‚   â””â”€â”€ index.ts             # Workers å…¥å£æ–‡ä»¶ï¼ŒAPI è·¯ç”±å®šä¹‰
â”œâ”€â”€ src/                     # React å‰ç«¯æºç 
â”‚   â”œâ”€â”€ API/                 # API å®¢æˆ·ç«¯å±‚
â”‚   â”‚   â”œâ”€â”€ client.ts        # çœŸå® HTTP å®¢æˆ·ç«¯
â”‚   â”‚   â”œâ”€â”€ mock.ts          # Mock å®¢æˆ·ç«¯ï¼ˆå¼€å‘ç”¨ï¼‰
â”‚   â”‚   â””â”€â”€ http.ts          # ç±»å‹å®šä¹‰å’ŒæœåŠ¡ç«¯ API
â”‚   â”œâ”€â”€ components/          # React ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ GroupCard.tsx    # åˆ†ç»„å¡ç‰‡ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ SiteCard.tsx     # ç½‘ç«™å¡ç‰‡ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ LoginForm.tsx    # ç™»å½•è¡¨å•
â”‚   â”‚   â”œâ”€â”€ SortableGroupItem.tsx  # å¯æ‹–æ‹½åˆ†ç»„
â”‚   â”‚   â”œâ”€â”€ SiteSettingsModal.tsx  # å…¨å±€è®¾ç½®å¼¹çª—
â”‚   â”‚   â””â”€â”€ ThemeToggle.tsx  # ä¸»é¢˜åˆ‡æ¢æŒ‰é’®
â”‚   â”œâ”€â”€ App.tsx              # ä¸»åº”ç”¨ç»„ä»¶
â”‚   â””â”€â”€ main.tsx             # åº”ç”¨å…¥å£
â”œâ”€â”€ public/                  # é™æ€èµ„æº
â”œâ”€â”€ migrations/              # D1 æ•°æ®åº“è¿ç§»è„šæœ¬ï¼ˆå« is_public å­—æ®µï¼‰
â”‚   â””â”€â”€ 002_add_is_public.sql
â”œâ”€â”€ scripts/                 # å·¥å…·è„šæœ¬
â”‚   â””â”€â”€ hash-password.ts     # å¯†ç å“ˆå¸Œç”Ÿæˆå·¥å…·
â”œâ”€â”€ wrangler.jsonc           # Cloudflare Workers é…ç½®
â”œâ”€â”€ vite.config.ts           # Vite æ„å»ºé…ç½®
â”œâ”€â”€ tsconfig.json            # TypeScript é…ç½®
â”œâ”€â”€ tailwind.config.js       # Tailwind CSS é…ç½®
â””â”€â”€ package.json             # é¡¹ç›®ä¾èµ–å’Œè„šæœ¬
```

### å…³é”®æ–‡ä»¶è¯´æ˜

| æ–‡ä»¶ | ä½œç”¨ |
|------|------|
| `worker/index.ts` | åç«¯ API è·¯ç”±ï¼Œæ•°æ®åº“æ“ä½œï¼Œèº«ä»½è®¤è¯ |
| `src/App.tsx` | å‰ç«¯ä¸»ç»„ä»¶ï¼ŒçŠ¶æ€ç®¡ç†ï¼Œå¸ƒå±€æ¸²æŸ“ |
| `src/API/client.ts` | API å®¢æˆ·ç«¯ï¼Œå¤„ç†æ‰€æœ‰ HTTP è¯·æ±‚ |
| `wrangler.jsonc` | Workers é…ç½®ï¼Œç¯å¢ƒå˜é‡ï¼ŒD1 ç»‘å®š |
| `vite.config.ts` | å‰ç«¯æ„å»ºé…ç½®ï¼Œå¼€å‘æœåŠ¡å™¨è®¾ç½® |
| `migrations/002_add_is_public.sql` | ä¸ºå…ç™»é™†æ¨¡å¼æ·»åŠ  `is_public` å­—æ®µå’Œç´¢å¼• |

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿æ‰€æœ‰å½¢å¼çš„è´¡çŒ®ï¼æ— è®ºæ˜¯æŠ¥å‘Š Bugã€æå‡ºæ–°åŠŸèƒ½å»ºè®®ï¼Œè¿˜æ˜¯æäº¤ä»£ç æ”¹è¿›ã€‚

### å¦‚ä½•è´¡çŒ®

1. **Fork æœ¬ä»“åº“** åˆ°ä½ çš„ GitHub è´¦å·
2. **å…‹éš†åˆ°æœ¬åœ°**ï¼š`git clone https://github.com/your-username/Cloudflare-Navihive.git`
3. **åˆ›å»ºç‰¹æ€§åˆ†æ”¯**ï¼š`git checkout -b feature/amazing-feature`
4. **æäº¤æ›´æ”¹**ï¼š`git commit -m 'feat: æ·»åŠ æŸä¸ªå¾ˆæ£’çš„åŠŸèƒ½'`
5. **æ¨é€åˆ°åˆ†æ”¯**ï¼š`git push origin feature/amazing-feature`
6. **æäº¤ Pull Request**ï¼Œæè¿°ä½ çš„æ›´æ”¹å†…å®¹

### æäº¤è§„èŒƒ

è¯·éµå¾ª [Conventional Commits](https://www.conventionalcommits.org/) è§„èŒƒï¼š

- `feat:` æ–°åŠŸèƒ½
- `fix:` Bug ä¿®å¤
- `docs:` æ–‡æ¡£æ›´æ–°
- `style:` ä»£ç æ ¼å¼è°ƒæ•´ï¼ˆä¸å½±å“åŠŸèƒ½ï¼‰
- `refactor:` ä»£ç é‡æ„
- `perf:` æ€§èƒ½ä¼˜åŒ–
- `test:` æµ‹è¯•ç›¸å…³
- `chore:` æ„å»ºå·¥å…·æˆ–è¾…åŠ©å·¥å…·çš„å˜åŠ¨

### å¼€å‘å‰å‡†å¤‡

```bash
# å®‰è£…ä¾èµ–
pnpm install

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
pnpm dev

# è¿è¡Œä»£ç æ£€æŸ¥
pnpm lint

# æ ¼å¼åŒ–ä»£ç 
pnpm format
```

### å¯»æ±‚å¸®åŠ©

- ğŸ“– æŸ¥çœ‹ [CLAUDE.md](CLAUDE.md) äº†è§£é¡¹ç›®è¯¦ç»†æ¶æ„
- ğŸ’¬ åœ¨ [Issues](https://github.com/ziyuandaili/Cloudflare-Navihive/issues) ä¸­æé—®
- ğŸ› æŠ¥å‘Š Bug æ—¶è¯·åŒ…å«ï¼šé”™è¯¯ä¿¡æ¯ã€å¤ç°æ­¥éª¤ã€æµè§ˆå™¨ç‰ˆæœ¬

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®åŸºäº [MIT License](LICENSE) å¼€æºåè®®å‘å¸ƒã€‚

è¿™æ„å‘³ç€ä½ å¯ä»¥ï¼š
- âœ… è‡ªç”±ä½¿ç”¨ã€ä¿®æ”¹å’Œåˆ†å‘æœ¬é¡¹ç›®
- âœ… ç”¨äºå•†ä¸šç”¨é€”
- âœ… ç§æœ‰åŒ–éƒ¨ç½²
- âš ï¸ ä½†éœ€ä¿ç•™åŸä½œè€…ç‰ˆæƒå£°æ˜

è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶ã€‚

## ğŸ™ è‡´è°¢

æ„Ÿè°¢ä»¥ä¸‹å¼€æºé¡¹ç›®å’ŒæœåŠ¡ï¼Œè®© NaviHive æˆä¸ºå¯èƒ½ï¼š

### æŠ€æœ¯æ¡†æ¶
-   [React](https://reactjs.org/) - ç”¨æˆ·ç•Œé¢æ„å»ºåº“
-   [TypeScript](https://www.typescriptlang.org/) - JavaScript è¶…é›†
-   [Vite](https://vitejs.dev/) - ä¸‹ä¸€ä»£å‰ç«¯æ„å»ºå·¥å…·

### UI ç»„ä»¶
-   [Material UI](https://mui.com/) - React ç»„ä»¶åº“
-   [DND Kit](https://dndkit.com/) - æ‹–æ‹½äº¤äº’å·¥å…·
-   [Tailwind CSS](https://tailwindcss.com/) - åŸå­åŒ– CSS æ¡†æ¶

### äº‘æœåŠ¡
-   [Cloudflare Workers](https://workers.cloudflare.com/) - è¾¹ç¼˜è®¡ç®—å¹³å°
-   [Cloudflare D1](https://developers.cloudflare.com/d1/) - åˆ†å¸ƒå¼æ•°æ®åº“

### å¼€å‘å·¥å…·
-   [Claude Code](https://claude.ai/code) - AI è¾…åŠ©å¼€å‘
-   [Cursor](https://www.cursor.com) - AI ä»£ç ç¼–è¾‘å™¨

### ç¤¾åŒºæ”¯æŒ
æ„Ÿè°¢æ‰€æœ‰æäº¤ Issueã€PR å’Œ Star çš„å¼€å‘è€…ä»¬ï¼ğŸŒŸ

## ğŸ“… æ›´æ–°æ—¥å¿—

### v1.1.0 (2025-01-08) - å…ç™»é™†è®¿å®¢æ¨¡å¼
- âœ¨ æ–°å¢ `AUTH_REQUIRED_FOR_READ` å¼€å…³ï¼Œæ”¯æŒå…¬å¼€åªè¯»è®¿é—®
- ğŸ—ƒï¸ æ•°æ®åº“æ–°å¢ `is_public` å­—æ®µåŠç´¢å¼•ï¼Œç§å¯†/å…¬å¼€å†…å®¹å¯ç²¾ç»†æ§åˆ¶
- ğŸ§­ å‰ç«¯æ·»åŠ è®¿å®¢/ç¼–è¾‘åŒæ¨¡å¼ï¼Œæœªç™»å½•æ—¶ä»…æ¸²æŸ“å…¬å¼€å†…å®¹
- ğŸ“˜ æ–‡æ¡£ä¸éƒ¨ç½²æµç¨‹æ›´æ–°ï¼Œæä¾›æ—§é¡¹ç›®è¿ç§»æŒ‡å—
- ğŸ§± ç™»å½•ç«¯ç‚¹å†…ç½®é€Ÿç‡é™åˆ¶ï¼ˆ5 æ¬¡å°è¯• / 15 åˆ†é’Ÿï¼‰ï¼Œé˜»æ–­æš´åŠ›ç ´è§£

### ğŸ”’ å®‰å…¨æ›´æ–°ç‰ˆæœ¬ (2025-01-08)
- ğŸ” **[CR-001]** å®ç° JWT ç­¾åï¼ˆWeb Crypto API + HMAC-SHA256ï¼‰
- ğŸ›¡ï¸ **[CR-003]** XSS é˜²æŠ¤ï¼ˆCSS ä»£ç æ²™ç®±åŒ–ï¼Œç§»é™¤å±é™©æ¨¡å¼ï¼‰
- ğŸš« **[CR-004]** SSRF é˜²æŠ¤ï¼ˆç§æœ‰ IP åœ°å€è¿‡æ»¤ï¼‰
- ğŸ’‰ **[CR-002]** SQL æ³¨å…¥é˜²æŠ¤ï¼ˆå‚æ•°åŒ–æŸ¥è¯¢ï¼‰
- ğŸª **[HS-001]** HttpOnly Cookieï¼ˆé˜²æ­¢ XSS çªƒå– Tokenï¼‰
- ğŸ”’ **[HS-003]** bcrypt å¯†ç å“ˆå¸Œï¼ˆ10 è½®ç›å€¼åŠ å¯†ï¼‰
- ğŸŒ **[HS-004]** CORS ç™½åå•é…ç½®
- ğŸ†” **[HS-005]** ç»“æ„åŒ–é”™è¯¯æ—¥å¿—ï¼ˆå”¯ä¸€é”™è¯¯ IDï¼‰
- ğŸ§± ç™»å½•ç«¯ç‚¹é€Ÿç‡é™åˆ¶ï¼ˆè¶…å‡º 5 æ¬¡ / 15 åˆ†é’Ÿå³è¿”å› 429 å¹¶è®°å½• IPï¼‰
- âœ… **[MS-001]** TypeScript ä¸¥æ ¼æ¨¡å¼ï¼ˆä¿®å¤ 65+ ç±»å‹é”™è¯¯ï¼‰
- ğŸ“¦ **[MS-005]** è¯·æ±‚ä½“å¤§å°é™åˆ¶ï¼ˆæœ€å¤§ 1MBï¼‰
- ğŸ§ª **[MS-007]** æ·±åº¦æ•°æ®éªŒè¯ï¼ˆå¯¼å…¥æ“ä½œï¼‰

> ğŸ“ å…±è®¡ 10 æ¬¡å®‰å…¨æäº¤ï¼Œå…¨é¢æå‡ç³»ç»Ÿå®‰å…¨æ€§

---

### v1.0.4 (2025-04-22)
- âœ¨ æ–°å¢"è®°ä½æˆ‘"ç™»å½•åŠŸèƒ½ï¼Œå¯é€‰ 30 å¤©é•¿æ•ˆ Token
- ğŸ› ä¿®å¤ URL æ­£åˆ™è¡¨è¾¾å¼è½¬ä¹‰å­—ç¬¦é—®é¢˜
- ğŸ” ä¼˜åŒ– Token è¿‡æœŸæ—¶é—´ç®¡ç†æœºåˆ¶

### v1.0.3 (2025-04-14)
- ğŸ–¼ï¸ å¢åŠ èƒŒæ™¯å›¾ç‰‡è®¾ç½®åŠŸèƒ½
- ğŸ¨ æ–°å¢è’™ç‰ˆé€æ˜åº¦è°ƒèŠ‚åŠŸèƒ½

### v1.0.2 (2025-04-09)
- ğŸ› ä¿®å¤å¯¼å…¥æ•°æ®æ—¶è‡ªå®šä¹‰æ ·å¼ä¸ºç©ºçš„æŠ¥é”™é—®é¢˜
- ğŸ› ä¿®å¤å¯¼å…¥æ•°æ®äº§ç”Ÿé‡å¤æ•°æ®çš„ Bug
- ğŸ› ä¿®å¤æ— å¡ç‰‡æ—¶æ’åºæ— æ³•ä¿å­˜çš„é—®é¢˜
- âœ¨ æ–°å¢å¯¼å…¥æ•°æ®æ™ºèƒ½åˆå¹¶åŠŸèƒ½ï¼ˆæŒ‰ URL åŒ¹é…ï¼‰
- âœ¨ æ–°å¢åˆ†ç»„æŠ˜å å±•å¼€åŠŸèƒ½

### v1.0.1 (2025-04-06)
- ğŸ”„ æ›´æ–° Chrome æµè§ˆå™¨æ ‡ç­¾æ•°æ®è½¬æ¢å·¥å…·

### v1.0.0 (2025-04-05) ğŸ‰
- ğŸš€ é¦–æ¬¡æ­£å¼å‘å¸ƒ
- âœ¨ å®Œæ•´çš„å¯¼èˆªç«™åŠŸèƒ½å®ç°
- ğŸ“š åˆ†ç»„ç®¡ç†ä¸æ‹–æ‹½æ’åº
- ğŸ” JWT ç”¨æˆ·è®¤è¯ç³»ç»Ÿ
- ğŸŒ“ æ·±è‰²/æµ…è‰²ä¸»é¢˜åˆ‡æ¢
- ğŸ“± å®Œå…¨å“åº”å¼è®¾è®¡
- ğŸ¨ è‡ªå®šä¹‰ CSS æ ·å¼æ”¯æŒ

---

## â­ æ”¯æŒé¡¹ç›®

å¦‚æœ NaviHive å¯¹ä½ æœ‰å¸®åŠ©ï¼Œæ¬¢è¿é€šè¿‡ä»¥ä¸‹æ–¹å¼æ”¯æŒï¼š

### ğŸ’ ç»™é¡¹ç›®ç‚¹èµ
- ç‚¹å‡»å³ä¸Šè§’çš„ â­ **Star** æŒ‰é’®ï¼Œè¿™æ˜¯å¯¹å¼€å‘è€…æœ€å¤§çš„é¼“åŠ±
- **Fork** é¡¹ç›®ï¼Œå‚ä¸æ”¹è¿›å’Œå®šåˆ¶
- åˆ†äº«ç»™ä½ çš„æœ‹å‹å’ŒåŒäº‹

### ğŸ’° èµèµæ”¯æŒ
ä½ çš„èµèµå°†ç”¨äºé¡¹ç›®çš„æŒç»­å¼€å‘å’Œç»´æŠ¤ï¼š

<div align="center">
  <img src="https://img.zhengmi.org/file/1743956440128_4b965550184c06d8164f8077fa42b5d.jpg" alt="å¾®ä¿¡èµèµç " width="300">
  <p><em>å¾®ä¿¡æ‰«ç èµèµ</em></p>
</div>

### ğŸ¤ å…¶ä»–æ”¯æŒæ–¹å¼
- ğŸ’¬ æäº¤æœ‰ä»·å€¼çš„ Issue å’Œ Feature Request
- ğŸ“ æ”¹è¿›æ–‡æ¡£å’Œæ•™ç¨‹
- ğŸ› æŠ¥å‘Š Bug å¹¶æä¾›å¤ç°æ­¥éª¤
- ğŸ’» è´¡çŒ®ä»£ç ï¼ˆæ¬¢è¿æäº¤ PRï¼‰

---
## ğŸ“ˆ Star History

<picture>
  <source media="(prefers-color-scheme: dark)" srcset="https://api.star-history.com/svg?repos=zqq-nuli/Cloudflare-Navihive&type=Date&theme=dark" />
  <source media="(prefers-color-scheme: light)" srcset="https://api.star-history.com/svg?repos=zqq-nuli/Cloudflare-Navihive&type=Date" />
  <img alt="Star History Chart" src="https://api.star-history.com/svg?repos=zqq-nuli/Cloudflare-Navihive&type=Date" />
</picture>

---

<div align="center">

## ğŸ‰ è®©å¯¼èˆªç®¡ç†æ›´ç®€å•

**NaviHive** - ä½ çš„ä¸“å±ç½‘ç»œå¯¼èˆªä¸­å¿ƒ

[ç«‹å³éƒ¨ç½²](https://deploy.workers.cloudflare.com/?url=https://github.com/ziyuandaili/Cloudflare-Navihive) Â· [åœ¨çº¿æ¼”ç¤º](https://nav.zyxq.org/) Â· [æäº¤é—®é¢˜](https://github.com/ziyuandaili/Cloudflare-Navihive/issues) Â· [å‚ä¸è´¡çŒ®](https://github.com/ziyuandaili/Cloudflare-Navihive/pulls)

Made with â¤ï¸ by [zqq-nuli](https://github.com/zqq-nuli)

â­ å¦‚æœè§‰å¾—æœ‰ç”¨ï¼Œåˆ«å¿˜äº†ç‚¹ä¸ª Star å“¦ â­

</div>
